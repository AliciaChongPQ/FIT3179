{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": {
      "text":"Incidence Rate of Cholera By State in Malaysia per 100,000 population",
      "fontSize": 20
  },
    "width": 1000,
    "height": 600,
    "projection": {"type": "equalEarth",
                    "scale": 3000,
                    "center": [104.3, 3],
                    "translate": [275, 350]},
    "data": {
      "url": "https://raw.githubusercontent.com/AliciaChongPQ/FIT3179/refs/heads/main/Week%209%20Homework/js/ne_1.topojson",
      "format": {"type": "topojson", "feature": "ne_10m_admin_1_states_provinces"}
    },
    "layer": [
      

    {"transform": [
      {
        "lookup": "properties.name",
        "from": {
          "data": {
            "url": "https://raw.githubusercontent.com/AliciaChongPQ/FIT3179/refs/heads/main/Week%209%20Homework/data/cholera_by_state.csv"
          },
          "key": "State",
          "fields": ["Year","Incidence Rate Per 100 000 Population"]
        }
      }
    ],
    "mark": {"type": "geoshape",
            "stroke": "floralwhite",
          "strokeWidth": 1.5},
    "encoding": {
      "color": {      
        "field": "Incidence Rate Per 100 000 Population",      
        "type": "quantitative",      
        "scale": {
          "type": "threshold",
          "domain": [0.1, 0.3, 1, 3], 
          "range": ["#f7e0df","#c74940", "#992820", "#570c07", "#2b0503"] 
        },
        "title": "Incidence Rate Per 100 000 Population"    
      },
      "tooltip": [
        {"field": "properties.name", "type": "nominal", "title": "State"},
        {"field": "Incidence Rate Per 100 000 Population", "type": "quantitative", "title":"Incidence Rate Per 100 000 Population"}
      ]
    }
},
{
  "data": {
    "values": [
      {"state": "Johor", "latitude": 1.9854, "longitude": 103.2618},
      {"state": "Kedah", "latitude": 6.1184, "longitude": 100.3681},
      {"state": "Kelantan", "latitude": 6.2456, "longitude": 101.9976},
      {"state": "Melaka", "latitude": 2.000, "longitude": 101.9000},
      {"state": "N.Sembilan", "latitude": 2.7255, "longitude": 102.1424},
      {"state": "Pahang", "latitude": 3.8126, "longitude": 102.3256},
      {"state": "Perak", "latitude": 4.5921, "longitude": 100.4901},
      {"state": "Perlis", "latitude": 6.4431, "longitude": 100.1983},
      {"state": "Penang", "latitude": 5.4141, "longitude": 100.3288},
      {"state": "Sabah", "latitude": 5.38, "longitude": 117.0753},
      {"state": "Sarawak", "latitude": 2.478, "longitude": 113.0592},
      {"state": "Selangor", "latitude": 3.3738, "longitude": 101.3683},
      {"state": "Terengganu", "latitude": 5.0117, "longitude": 103.2524},
      {"state": "K.Lumpur", "latitude": 3.139, "longitude": 101.6869},
      {"state": "Labuan", "latitude": 5.3831, "longitude": 112.2308},
      {"state": "Putrajaya", "latitude": 2.8664, "longitude": 101.1764}
    ]
  },
  "mark": {
    "type": "text",
    "color": "black",
    "fontWeight": "bold",
    "fontSize": 11,
    "dx": 5,
    "dy": -5
  },
  "encoding": {
    "longitude": {"field": "longitude", "type": "quantitative"},
    "latitude": {"field": "latitude", "type": "quantitative"},
    "text": {"field": "state", "type": "nominal"}
  }
},
{
  "mark": {"type": "geoshape", "stroke": "gray",
"strokeWidth": 0.5},
  "data": {"graticule": {"step": [1, 1]}}
}, 
{
  "data": {"graticule": {"step": [1, 1]}}, 
  "mark": {
    "type": "geoshape",
    "stroke": "grey",
    "strokeWidth": 0.5,
    "interactive": false,
    "fillOpacity": 0
  }
},
{
  "data": {
    "url": "https://raw.githubusercontent.com/AliciaChongPQ/FIT3179/refs/heads/main/Week%209%20Homework/js/ne_1.topojson",
    "format": {
      "type": "topojson",
      "feature": "ne_10m_admin_1_states_provinces"
    }
  },
  "mark": {
    "type": "geoshape",
    "fill": "transparent",
    "stroke": "transparent",  
    "strokeWidth": 0.3   

  },
  "encoding": {
    "tooltip": [
      {"field": "properties.name", "type": "nominal", "title": "State"},
      {"field": "Incidence Rate Per 100 000 Population", "type": "quantitative",  "title": "Incidence Rate Per 100 000 Population"}
      
    ]
  },
  "transform": [
  {
    "lookup": "properties.name",  
    "from": {
      "data": {
        "url": "https://raw.githubusercontent.com/AliciaChongPQ/FIT3179/refs/heads/main/Week%209%20Homework/data/cholera_by_state.csv"  
      },
      "key": "State",  
      "fields": ["Incidence Rate Per 100 000 Population"]
    }
  }
]
}]
  }